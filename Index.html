<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movimiento del Personaje</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="gameArea">
        <div id="personaje1" class="personaje" style="left: 750px; top: 147px;"></div>
        <div id="personaje2" class="personaje" style="left: 850px; top: 147px;"></div>
        <div id="personaje3" class="personaje" style="left: 950px; top: 147px;"></div>
        <div id="personaje4" class="personaje" style="left: 1050px; top: 147px;"></div>
    </div>

    <div class="selector" id="selector">
        <button onclick="seleccionarPersonaje('personaje1')">Seleccionar Personaje 1</button>
        <button onclick="seleccionarPersonaje('personaje2')">Seleccionar Personaje 2</button>
        <button onclick="seleccionarPersonaje('personaje3')">Seleccionar Personaje 3</button>
        <button onclick="seleccionarPersonaje('personaje4')">Seleccionar Personaje 4</button>
    </div>

    <button id="startButton" onclick="iniciarJuego()">Start Game</button>

    <script>
        var posLeft = 750;
        var posTop = 147;
        var personajeSeleccionado = null;
        var distancia = 5;

        document.getElementById('personaje1').style.display = 'none';
        document.getElementById('personaje2').style.display = 'none';
        document.getElementById('personaje3').style.display = 'none';
        document.getElementById('personaje4').style.display = 'none';
        document.getElementById('selector').style.display = 'none';

        function iniciarJuego() {
            document.getElementById('personaje1').style.display = 'block';
            document.getElementById('personaje2').style.display = 'block';
            document.getElementById('personaje3').style.display = 'block';
            document.getElementById('personaje4').style.display = 'block';
            document.getElementById('selector').style.display = 'block';
            document.getElementById('startButton').style.display = 'none';
        }

        function seleccionarPersonaje(id) {
            personajeSeleccionado = document.getElementById(id);
            posLeft = parseInt(personajeSeleccionado.style.left);
            posTop = parseInt(personajeSeleccionado.style.top);
            alert('Personaje ' + id + ' seleccionado!');
        }

        // Verificar si la posición está dentro del área permitida
        function estaDentroDeArea(nuevaPosLeft, nuevaPosTop) {
            const areaJuego = document.getElementById('gameArea');
            const limiteIzquierdo = 0;
            const limiteSuperior = 0;
            const limiteDerecho = areaJuego.offsetWidth - 50; // Resta el tamaño del personaje
            const limiteInferior = areaJuego.offsetHeight - 50; // Resta el tamaño del personaje

            // Comprobamos si la nueva posición está dentro de los límites del área del juego
            function estaDentroDeArea(nuevaPosLeft, nuevaPosTop) {
    // Definir los límites del área de juego
    const limiteIzquierdo = 0;
    const limiteSuperior = 0;
    const limiteDerecho = 800;  // por ejemplo, el área del juego tiene un ancho de 800px
    const limiteInferior = 500; // el área del juego tiene una altura de 500px


    // Verificar si la nueva posición está dentro de los límites
    if (nuevaPosLeft < limiteIzquierdo) {
        return false; // Si la posición está fuera del límite izquierdo
    }
    if (nuevaPosTop < limiteSuperior) {
        return false; // Si la posición está fuera del límite superior
    }
    if (nuevaPosLeft > limiteDerecho) {
        return false; // Si la posición está fuera del límite derecho
    }
    if (nuevaPosTop > limiteInferior) {
        return false; // Si la posición está fuera del límite inferior
    }

    // Si ninguna de las condiciones anteriores es verdadera, entonces está dentro del área
    return true;
}
        }

        function estaOcupado(nuevaPosLeft, nuevaPosTop) {
            var personajes = document.getElementsByClassName('personaje');
            for (var i = 0; i < personajes.length; i++) {
                var personaje = personajes[i];
                if (personaje !== personajeSeleccionado) {
                    var personajeLeft = parseInt(personaje.style.left);
                    var personajeTop = parseInt(personaje.style.top);

                    if (nuevaPosLeft < personajeLeft + 50 && nuevaPosLeft + 50 > personajeLeft &&
                        nuevaPosTop < personajeTop + 50 && nuevaPosTop + 50 > personajeTop) {
                        return true;
                    }
                }
            }
            return false;
        }

        document.onkeydown = function(evento) {
            if (!personajeSeleccionado) return;

            var nuevaPosLeft = posLeft;
            var nuevaPosTop = posTop;

            var screenWidth = window.innerWidth;
            var screenHeight = window.innerHeight;
            var characterSize = 50; 

            switch(evento.keyCode) {
                case 37:
                    if (posLeft - distancia >= 0) {
                        nuevaPosLeft = posLeft - distancia;
                    }
                    break;
                case 38:
                    if (posTop - distancia >= 0) {
                        nuevaPosTop = posTop - distancia;
                    }
                    break;
                case 39:
                    if (posLeft + distancia + characterSize <= screenWidth) {
                        nuevaPosLeft = posLeft + distancia;
                    }
                    break;
                case 40:
                    if (posTop + distancia + characterSize <= screenHeight) {
                        nuevaPosTop = posTop + distancia;
                    }
                    break;
            }

            // Verificar si la nueva posición está ocupada
            if (!estaOcupado(nuevaPosLeft, nuevaPosTop)) {
                // Si no está ocupada, actualizamos la posición
                posLeft = nuevaPosLeft;
                posTop = nuevaPosTop;
                personajeSeleccionado.style.left = posLeft + 'px';
                personajeSeleccionado.style.top = posTop + 'px';
            }
        };
    </script>
</body>
</html>